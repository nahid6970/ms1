<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Editor</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <div class="container">
        <!-- Document Tabs -->
        <div class="document-tabs">
            <button onclick="addDocument()" class="btn-add-document" title="New Document">+</button>
            
            <div class="document-controls">
                <div class="document-selector">
                    <button class="document-current" id="currentDocumentBtn" onclick="toggleDocumentList()">
                        <span id="currentDocumentName">Document1</span>
                        <span class="dropdown-arrow">‚ñº</span>
                    </button>
                    <div class="document-list" id="documentList"></div>
                </div>
                
                <button onclick="showRenameModal(currentDocument)" class="btn-document-action" title="Rename Document">
                    <span>‚úèÔ∏è</span>
                </button>
                <button onclick="deleteDocument(currentDocument)" class="btn-document-action btn-delete" title="Delete Document">
                    <span>üóëÔ∏è</span>
                </button>
            </div>

            <div class="document-info">
                <span id="documentInfo">Ready</span>
            </div>
        </div>

        <!-- Toolbar -->
        <div class="toolbar">
            <div class="toolbar-group">
                <button onclick="formatText('bold')" class="btn btn-format" title="Bold (Ctrl+B)">
                    <strong>B</strong>
                </button>
                <button onclick="formatText('italic')" class="btn btn-format" title="Italic (Ctrl+I)">
                    <em>I</em>
                </button>
                <button onclick="formatText('underline')" class="btn btn-format" title="Underline (Ctrl+U)">
                    <u>U</u>
                </button>
            </div>

            <div class="toolbar-separator"></div>

            <div class="toolbar-group">
                <select id="fontFamily" onchange="changeFontFamily()" class="font-select">
                    <option value="Inter">Inter</option>
                    <option value="Arial">Arial</option>
                    <option value="Times New Roman">Times New Roman</option>
                    <option value="Courier New">Courier New</option>
                    <option value="Georgia">Georgia</option>
                    <option value="Verdana">Verdana</option>
                </select>
                
                <select id="fontSize" onchange="changeFontSize()" class="font-select">
                    <option value="12px">12</option>
                    <option value="14px" selected>14</option>
                    <option value="16px">16</option>
                    <option value="18px">18</option>
                    <option value="20px">20</option>
                    <option value="24px">24</option>
                    <option value="28px">28</option>
                    <option value="32px">32</option>
                </select>
            </div>

            <div class="toolbar-separator"></div>

            <div class="toolbar-group">
                <button onclick="formatText('justifyLeft')" class="btn btn-format" title="Align Left">
                    <span>‚¨ÖÔ∏è</span>
                </button>
                <button onclick="formatText('justifyCenter')" class="btn btn-format" title="Align Center">
                    <span>‚ÜîÔ∏è</span>
                </button>
                <button onclick="formatText('justifyRight')" class="btn btn-format" title="Align Right">
                    <span>‚û°Ô∏è</span>
                </button>
            </div>

            <div class="toolbar-separator"></div>

            <div class="toolbar-group">
                <button onclick="formatText('insertUnorderedList')" class="btn btn-format" title="Bullet List">
                    <span>‚Ä¢</span>
                </button>
                <button onclick="formatText('insertOrderedList')" class="btn btn-format" title="Numbered List">
                    <span>1.</span>
                </button>
            </div>

            <div class="toolbar-separator"></div>

            <div class="toolbar-group">
                <button onclick="formatHeading('p')" class="btn btn-format" title="Normal Text">
                    <span>Normal</span>
                </button>
                <button onclick="formatHeading('h1')" class="btn btn-format" title="Heading 1">
                    <span>H1</span>
                </button>
                <button onclick="formatHeading('h2')" class="btn btn-format" title="Heading 2">
                    <span>H2</span>
                </button>
                <button onclick="formatHeading('h3')" class="btn btn-format" title="Heading 3">
                    <span>H3</span>
                </button>
            </div>

            <div class="toolbar-separator"></div>

            <div class="toolbar-group">
                <button onclick="saveData()" class="btn btn-success">Save</button>
                <button onclick="loadData()" class="btn btn-info">Refresh</button>
            </div>
        </div>

        <!-- Editor -->
        <div class="editor-container">
            <div id="editor" class="editor" contenteditable="true" placeholder="Start typing your document..."></div>
        </div>
    </div>

    <!-- Heading Context Menu -->
    <div id="headingContextMenu" class="context-menu">
        <div class="context-menu-item" onclick="showHeadingStyleModal()">
            <span>üé®</span>
            <span>Customize Heading Style</span>
        </div>
        <div class="context-menu-separator"></div>
        <div class="context-menu-item" onclick="resetHeadingStyle()">
            <span>üîÑ</span>
            <span>Reset to Default</span>
        </div>
    </div>

    <!-- Heading Style Modal -->
    <div id="headingStyleModal" class="modal">
        <div class="modal-content heading-style-modal">
            <div class="modal-header">
                <h2 id="headingStyleTitle">Customize Heading Style</h2>
                <span class="close" onclick="closeHeadingStyleModal()">&times;</span>
            </div>
            <form id="headingStyleForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="headingFontSize">Font Size</label>
                        <select id="headingFontSize" class="form-input">
                            <option value="1em">1em (16px)</option>
                            <option value="1.25em">1.25em (20px)</option>
                            <option value="1.5em">1.5em (24px)</option>
                            <option value="1.75em">1.75em (28px)</option>
                            <option value="2em">2em (32px)</option>
                            <option value="2.5em">2.5em (40px)</option>
                            <option value="3em">3em (48px)</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="headingFontWeight">Font Weight</label>
                        <select id="headingFontWeight" class="form-input">
                            <option value="400">Normal (400)</option>
                            <option value="500">Medium (500)</option>
                            <option value="600">Semi-Bold (600)</option>
                            <option value="700">Bold (700)</option>
                            <option value="800">Extra Bold (800)</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="headingTextColor">Text Color</label>
                        <div class="color-picker-wrapper">
                            <input type="color" id="headingTextColor" class="color-input" value="#1a1a1a">
                            <input type="text" id="headingTextColorText" class="form-input color-text" value="#1A1A1A" readonly>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="headingAlignment">Text Alignment</label>
                        <select id="headingAlignment" class="form-input">
                            <option value="left">Left</option>
                            <option value="center">Center</option>
                            <option value="right">Right</option>
                            <option value="justify">Justify</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="headingMarginTop">Spacing Before (em)</label>
                        <input type="number" id="headingMarginTop" class="form-input" value="0.5" min="0" max="5" step="0.1">
                    </div>
                    
                    <div class="form-group">
                        <label for="headingMarginBottom">Spacing After (em)</label>
                        <input type="number" id="headingMarginBottom" class="form-input" value="0.5" min="0" max="5" step="0.1">
                    </div>
                </div>

                <div class="form-group">
                    <label for="headingLineHeight">Line Height</label>
                    <select id="headingLineHeight" class="form-input">
                        <option value="1">1 (Tight)</option>
                        <option value="1.2">1.2 (Normal)</option>
                        <option value="1.4">1.4 (Relaxed)</option>
                        <option value="1.6">1.6 (Loose)</option>
                        <option value="2">2 (Double)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Border Options</label>
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="headingBorderBottom">
                            <span>Bottom Border</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="headingBorderTop">
                            <span>Top Border</span>
                        </label>
                    </div>
                </div>

                <div class="form-row" id="borderColorRow" style="display: none;">
                    <div class="form-group">
                        <label for="headingBorderColor">Border Color</label>
                        <div class="color-picker-wrapper">
                            <input type="color" id="headingBorderColor" class="color-input" value="#e0e0e0">
                            <input type="text" id="headingBorderColorText" class="form-input color-text" value="#E0E0E0" readonly>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="headingBorderWidth">Border Width (px)</label>
                        <select id="headingBorderWidth" class="form-input">
                            <option value="1px">1px</option>
                            <option value="2px">2px</option>
                            <option value="3px">3px</option>
                            <option value="4px">4px</option>
                            <option value="5px">5px</option>
                        </select>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeHeadingStyleModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Apply Style</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Rename Document Modal -->
    <div id="renameModal" class="modal">
        <div class="modal-content rename-modal">
            <div class="modal-header">
                <h2>Rename Document</h2>
                <span class="close" onclick="closeRenameModal()">&times;</span>
            </div>
            <form id="renameForm">
                <div class="form-group">
                    <label for="documentName">Document Name</label>
                    <input type="text" id="documentName" class="form-input" placeholder="Enter document name" required autofocus>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeRenameModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Rename</button>
                </div>
            </form>
        </div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>