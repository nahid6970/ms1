<!DOCTYPE html>
<html>

<head>
  <title>Home</title>
  <link rel="shortcut icon" href="https://cdn-icons-png.flaticon.com/512/4021/4021539.png" type="image/x-icon">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="../static/style.css">
</head>

<body>
  <div class="sidebar-container" id="sidebar-container">
    <div class="top-center-controls" id="sidebar-buttons-container">
      <!-- Sidebar buttons will be dynamically loaded here -->
    </div>
    <button class="sidebar-toggle" id="sidebar-toggle" title="Toggle Sidebar">
      <i class="nf nf-fa-chevron_right"></i>
    </button>
  </div>

  <div class="flex-container2">

    <div class="toggle-container" style="margin-left: 25px;">
      <label class="switch">
        <input type="checkbox" id="edit-mode-toggle">
        <span class="slider round"></span>
      </label>
      <span style="color: white; margin-left: 10px;">Modify</span>
    </div>

    <!-- Updated styling for better edit mode control -->
    <style>
      .dragging {
        opacity: 0.5;
      }

      .reorder-buttons {
        display: none;
        flex-direction: column;
        gap: 2px;
        margin-left: 5px;
      }

      .edit-mode .reorder-buttons {
        display: none;
      }

      .reorder-btn {
        background: #333;
        color: white;
        background-color: rgb(255, 218, 54);
        border: none;
        padding: 2px 6px;
        cursor: pointer;
        font-size: 12px;
        border-radius: 3px;
      }

      .reorder-btn:hover {
        background: #555;
      }

      /* Group reorder buttons - only visible in edit mode */
      .group-reorder-buttons {
        display: none;
        gap: 5px;
        margin-left: 10px;
      }

      .edit-mode .group-reorder-buttons {
        display: flex;
      }

      .link-item {
        cursor: move;
      }

      /* Notification badge styles */
      .notification-button-container {
        position: relative;
        display: inline-block;
      }

      .notification-badge {
        position: absolute;
        top: -8px;
        right: -8px;
        background-color: #ff4444;
        color: white;
        border-radius: 50%;
        padding: 2px 6px;
        font-size: 12px;
        font-weight: bold;
        min-width: 18px;
        text-align: center;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        z-index: 1000;
      }

      .notification-badge.zero {
        display: none !important;
      }
    </style>

    <div id="links-container"
      style="display: flex; width: 100%; flex-wrap: wrap; justify-content: left; flex-direction: row;">
    </div>

    <div id="edit-group-popup" class="popup-container hidden">
      <div class="popup-content">
        <span class="close-button">&times;</span>
        <h3>Group Settings</h3>
        <form id="edit-group-form" style="display: flex; flex-direction: column; gap: 10px; width: 400px;">
          <input type="hidden" id="edit-group-original-name">
          <label for="edit-group-name">Group Name:</label>
          <input type="text" id="edit-group-name" placeholder="Enter group name (leave empty for 'Ungrouped')" required>
          <label for="edit-group-display">Display Style:</label>
          <select id="edit-group-display">
            <option value="flex">Flex</option>
            <option value="list-item">List Item</option>
          </select>
          <div style="display: flex; align-items: center; gap: 10px;">
            <label for="edit-group-collapsible">
              <input type="checkbox" id="edit-group-collapsible">
              Enable Collapsible Toggle (shows at top when enabled)
            </label>
          </div>
          <div style="display: flex; align-items: center; gap: 10px;">
            <label for="edit-group-horizontal-stack">
              <input type="checkbox" id="edit-group-horizontal-stack">
              Stack Horizontally
            </label>
          </div>
          <div style="display: flex; align-items: center; gap: 10px;">
            <label for="edit-group-password-protect">
              <input type="checkbox" id="edit-group-password-protect">
              Require Password to Extend
            </label>
          </div>
          <div id="collapsible-rename-section" style="display: none;">
            <h4 style="color: white; margin: 15px 0 10px 0; border-bottom: 1px solid #555; padding-bottom: 5px;">Top
              Group Display Settings</h4>

            <label for="edit-group-top-name">Display Name (optional):</label>
            <input type="text" id="edit-group-top-name"
              placeholder="Custom name for top display (leave empty to use group name)">

            <h4 style="color: white; margin: 15px 0 10px 0; border-bottom: 1px solid #555; padding-bottom: 5px;">Top
              Group Color Settings</h4>

            <div style="display: flex; gap: 10px;">
              <input type="text" id="edit-group-top-bg-color" placeholder="Background Color (e.g., #2d2d2d or blue)">
              <input type="text" id="edit-group-top-text-color" placeholder="Text Color (e.g., #ffffff or white)">
            </div>

            <div style="display: flex; gap: 10px;">
              <input type="text" id="edit-group-top-border-color" placeholder="Border Color (e.g., #444444 or gray)">
              <input type="text" id="edit-group-top-hover-color" placeholder="Hover Color (e.g., #3a3a3a or darkgray)">
            </div>
          </div>

          <h4 style="color: white; margin: 15px 0 10px 0; border-bottom: 1px solid #555; padding-bottom: 5px;">Popup
            Content Styling</h4>

          <div style="display: flex; gap: 10px;">
            <input type="text" id="edit-group-popup-bg-color" placeholder="Popup Background Color (e.g., #31343a)">
            <input type="text" id="edit-group-popup-text-color" placeholder="Popup Text Color (e.g., #ffffff)">
          </div>

          <div style="display: flex; gap: 10px;">
            <input type="text" id="edit-group-popup-border-color" placeholder="Popup Border Color (e.g., #555555)">
            <input type="text" id="edit-group-popup-border-radius" placeholder="Popup Border Radius (e.g., 8px)">
          </div>

          <div id="horizontal-stack-styling-section" style="display: none;">
            <h4 style="color: white; margin: 15px 0 10px 0; border-bottom: 1px solid #555; padding-bottom: 5px;">
              Horizontal Stack Group Colors</h4>

            <div style="display: flex; gap: 10px;">
              <input type="text" id="edit-group-horizontal-bg-color"
                placeholder="Horizontal Stack Background Color (e.g., #2d2d2d)">
              <input type="text" id="edit-group-horizontal-text-color"
                placeholder="Horizontal Stack Text Color (e.g., #ffffff)">
            </div>

            <div style="display: flex; gap: 10px;">
              <input type="text" id="edit-group-horizontal-border-color"
                placeholder="Horizontal Stack Border Color (e.g., #0056b3)">
              <input type="text" id="edit-group-horizontal-hover-color"
                placeholder="Horizontal Stack Hover Color (e.g., #3a3a3a)">
            </div>
          </div>

          <button type="submit">Save Group Settings</button>
        </form>
      </div>
    </div>

    <div id="add-link-popup" class="popup-container hidden">
      <div class="popup-content">
        <span class="close-button">&times;</span>
        <h3>Add New Link</h3>
        <form id="add-link-form" style="display: flex; flex-direction: column; gap: 10px; width: 400px;">
          <input type="text" id="link-name" placeholder="Name" required>
          <input type="text" id="link-group" placeholder="Group (optional)">
          <input type="url" id="link-url" placeholder="URL">
          <label for="link-default-type">Default Type:</label>
          <select id="link-default-type">
            <option value="nerd-font">nerd-font</option>
            <option value="img">img</option>
            <option value="text">text</option>
          </select>
          <div style="display: flex; gap: 10px;">
            <input type="text" id="link-text" placeholder="Text (if no icon/image)">
            <input type="url" id="link-img-src" placeholder="Image URL (if no icon)">
            <input type="text" id="link-icon-class" placeholder="Icon Class (e.g., nf nf-cod-mail)">
          </div>
          <div style="display: flex; gap: 10px;">
            <input type="text" id="link-color" placeholder="Color (e.g., #f46613 or red)">
            <input type="text" id="link-background-color" placeholder="Background Color">
          </div>
          <input type="text" id="link-font-size" placeholder="Font Size (e.g., 16px)">
          <div style="display: flex; gap: 10px;">
            <input type="text" id="link-li-bg-color" placeholder="List Item BG Color">
            <input type="text" id="link-li-hover-color" placeholder="List Item Hover Color">
          </div>
          <input type="text" id="link-border-radius" placeholder="Border Radius">
          <input type="text" id="link-title" placeholder="Title (for tooltip)">
          <div style="display: flex; align-items: center; gap: 10px;">
            <label for="link-hidden">
              <input type="checkbox" id="link-hidden">
              Hide this item
            </label>
          </div>
          <button type="submit">Add Link</button>
        </form>
      </div>
    </div>

    <div id="edit-link-popup" class="popup-container hidden">
      <div class="popup-content">
        <span class="close-button">&times;</span>
        <h3>Edit Link</h3>
        <form id="edit-link-form" style="display: flex; flex-direction: column; gap: 10px; width: 400px;">
          <input type="hidden" id="edit-link-index">
          <input type="text" id="edit-link-name" placeholder="Name" required>
          <input type="text" id="edit-link-group" placeholder="Group (optional)">
          <input type="url" id="edit-link-url" placeholder="URL">
          <label for="edit-link-default-type">Default Type:</label>
          <select id="edit-link-default-type">
            <option value="nerd-font">nerd-font</option>
            <option value="img">img</option>
            <option value="text">text</option>
          </select>
          <div style="display: flex; gap: 10px;">
            <input type="text" id="edit-link-text" placeholder="Text (if no icon/image)">
            <input type="url" id="edit-link-img-src" placeholder="Image URL (if no icon)">
            <input type="text" id="edit-link-icon-class" placeholder="Icon Class (e.g., nf nf-cod-mail)">
          </div>
          <div style="display: flex; gap: 10px;">
            <input type="text" id="edit-link-width" placeholder="Width (e.g., 50)">
            <input type="text" id="edit-link-height" placeholder="Height (e.g., 50)">
          </div>
          <div style="display: flex; gap: 10px;">
            <input type="text" id="edit-link-color" placeholder="Color (e.g., #f46613 or red)">
            <input type="text" id="edit-link-background-color" placeholder="Background Color">
          </div>
          <input type="text" id="edit-link-font-size" placeholder="Font Size (e.g., 16px)">
          <div style="display: flex; gap: 10px;">
            <input type="text" id="edit-link-li-bg-color" placeholder="List Item BG Color">
            <input type="text" id="edit-link-li-hover-color" placeholder="List Item Hover Color">
          </div>
          <input type="text" id="edit-link-border-radius" placeholder="Border Radius">
          <input type="text" id="edit-link-title" placeholder="Title (for tooltip)">
          <div style="display: flex; align-items: center; gap: 10px;">
            <label for="edit-link-hidden">
              <input type="checkbox" id="edit-link-hidden">
              Hide this item
            </label>
          </div>
          <button type="submit">Save Changes</button>
        </form>
      </div>
    </div>

    <div id="horizontal-stack-popup" class="popup-container hidden">
      <div class="popup-content">
        <span class="close-button">&times;</span>
        <h3>Group Items</h3>
        <div class="popup-content-inner" style="display: flex; flex-wrap: wrap; gap: 10px;"></div>
      </div>
    </div>

    <div id="add-sidebar-button-popup" class="popup-container hidden">
      <div class="popup-content">
        <span class="close-button">&times;</span>
        <h3>Add Sidebar Button</h3>
        <form id="add-sidebar-button-form" style="display: flex; flex-direction: column; gap: 10px; width: 450px;">
          <input type="text" id="sidebar-button-name" placeholder="Button Name" required>
          <input type="url" id="sidebar-button-url" placeholder="URL" required>
          
          <label for="sidebar-button-display-type">Display Type:</label>
          <select id="sidebar-button-display-type">
            <option value="icon">Icon (Nerd Font)</option>
            <option value="image">Image</option>
          </select>
          
          <div id="icon-settings">
            <input type="text" id="sidebar-button-icon" placeholder="Icon Class (e.g., nf nf-fa-home)">
          </div>
          
          <div id="image-settings" style="display: none;">
            <input type="url" id="sidebar-button-img-src" placeholder="Image URL">
          </div>
          
          <h4 style="color: white; margin: 15px 0 10px 0; border-bottom: 1px solid #555; padding-bottom: 5px;">Colors</h4>
          <div style="display: flex; gap: 10px;">
            <input type="text" id="sidebar-button-bg-color" placeholder="Background Color (e.g., #ffffff)">
            <input type="text" id="sidebar-button-text-color" placeholder="Text/Icon Color (e.g., #000000)">
          </div>
          <input type="text" id="sidebar-button-hover-color" placeholder="Hover Color (e.g., #e0e0e0)">
          
          <div style="display: flex; align-items: center; gap: 10px;">
            <label for="sidebar-button-notification">
              <input type="checkbox" id="sidebar-button-notification">
              Has Notification Badge
            </label>
          </div>
          <div id="notification-settings" style="display: none;">
            <input type="text" id="sidebar-button-notification-api" placeholder="Notification API endpoint">
            <input type="text" id="sidebar-button-mark-seen-api" placeholder="Mark as seen API endpoint">
          </div>
          <button type="submit">Add Button</button>
        </form>
      </div>
    </div>

    <div id="edit-sidebar-button-popup" class="popup-container hidden">
      <div class="popup-content">
        <span class="close-button">&times;</span>
        <h3>Edit Sidebar Button</h3>
        <form id="edit-sidebar-button-form" style="display: flex; flex-direction: column; gap: 10px; width: 450px;">
          <input type="hidden" id="edit-sidebar-button-index">
          <input type="text" id="edit-sidebar-button-name" placeholder="Button Name" required>
          <input type="url" id="edit-sidebar-button-url" placeholder="URL" required>
          
          <label for="edit-sidebar-button-display-type">Display Type:</label>
          <select id="edit-sidebar-button-display-type">
            <option value="icon">Icon (Nerd Font)</option>
            <option value="image">Image</option>
          </select>
          
          <div id="edit-icon-settings">
            <input type="text" id="edit-sidebar-button-icon" placeholder="Icon Class (e.g., nf nf-fa-home)">
          </div>
          
          <div id="edit-image-settings" style="display: none;">
            <input type="url" id="edit-sidebar-button-img-src" placeholder="Image URL">
          </div>
          
          <h4 style="color: white; margin: 15px 0 10px 0; border-bottom: 1px solid #555; padding-bottom: 5px;">Colors</h4>
          <div style="display: flex; gap: 10px;">
            <input type="text" id="edit-sidebar-button-bg-color" placeholder="Background Color (e.g., #ffffff)">
            <input type="text" id="edit-sidebar-button-text-color" placeholder="Text/Icon Color (e.g., #000000)">
          </div>
          <input type="text" id="edit-sidebar-button-hover-color" placeholder="Hover Color (e.g., #e0e0e0)">
          
          <div style="display: flex; align-items: center; gap: 10px;">
            <label for="edit-sidebar-button-notification">
              <input type="checkbox" id="edit-sidebar-button-notification">
              Has Notification Badge
            </label>
          </div>
          <div id="edit-notification-settings" style="display: none;">
            <input type="text" id="edit-sidebar-button-notification-api" placeholder="Notification API endpoint">
            <input type="text" id="edit-sidebar-button-mark-seen-api" placeholder="Mark as seen API endpoint">
          </div>
          <button type="submit">Save Changes</button>
        </form>
      </div>
    </div>




    <script src="../static/links-handler.js"></script>
    <script src="../static/sidebar-handler.js"></script>
    <script src="../static/main.js"></script>



  </div>
</body>

</html>